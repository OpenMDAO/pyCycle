import numpy as np

from pycycle.maps.map_data import MapData

"""Python version of HBTF LPT map from NPSS"""

LPTMap = MapData()


# Map design point values
LPTMap.defaults = {}
LPTMap.defaults['alphaMap'] = 1.0
LPTMap.defaults['NpMap'] = 100.0
LPTMap.defaults['PRmap'] = 6.0 
#effMapDes = 0.9276   # = effMap for no scaling

LPTMap.alphaMap = np.array([1.0, 2.0])
LPTMap.NpMap = np.array([60., 70.0, 80.0, 90.0, 100., 110., 120.])
LPTMap.PRmap = np.array([ 3.00, 3.25, 3.5, 3.75, 4.0, 4.25, 4.5, 4.75, 5.0, 5.25, 5.5, 5.75, 6.0, 6.25, 6.5, 6.75, 7.0, 7.25, 7.5, 8.0])

LPTMap.effMap= np.array([[[0.8560, 0.8532, 0.8497, 0.8463, 0.8432, 0.8402, 0.8371, 0.8341, 0.8313, 0.8288, 0.8263, 0.8240, 0.8214, 0.8188, 0.8165, 0.8142, 0.8121, 0.8101, 0.8082, 0.8046],
                    [0.8855, 0.8853, 0.8844, 0.8832, 0.8818, 0.8799, 0.8782, 0.8764, 0.8748, 0.8726, 0.8703, 0.8682, 0.8661, 0.8642, 0.8624, 0.8606, 0.8589, 0.8573, 0.8557, 0.8527],
                    [0.8983, 0.9012, 0.9030, 0.9042, 0.9043, 0.9042, 0.9039, 0.9035, 0.9020, 0.9005, 0.8991, 0.8977, 0.8964, 0.8951, 0.8938, 0.8925, 0.8913, 0.8901, 0.8890, 0.8868],
                    [0.8974, 0.9038, 0.9084, 0.9120, 0.9140, 0.9156, 0.9169, 0.9172, 0.9168, 0.9164, 0.9159, 0.9153, 0.9147, 0.9140, 0.9134, 0.9127, 0.9121, 0.9114, 0.9107, 0.9095],
                    [0.8851, 0.8952, 0.9028, 0.9089, 0.9131, 0.9165, 0.9194, 0.9209, 0.9217, 0.9222, 0.9227, 0.9230, 0.9231, 0.9232, 0.9232, 0.9232, 0.9231, 0.9230, 0.9228, 0.9225],
                    [0.8630, 0.8772, 0.8878, 0.8965, 0.9030, 0.9083, 0.9128, 0.9160, 0.9180, 0.9197, 0.9211, 0.9223, 0.9233, 0.9241, 0.9248, 0.9254, 0.9259, 0.9264, 0.9268, 0.9274],
                    [0.8323, 0.8508, 0.8646, 0.8759, 0.8851, 0.8923, 0.8985, 0.9039, 0.9071, 0.9099, 0.9123, 0.9145, 0.9163, 0.9179, 0.9193, 0.9206, 0.9218, 0.9228, 0.9237, 0.9253]],
                    [[0.3778, 0.3827, 0.3870, 0.3907, 0.3926, 0.3944, 0.3960, 0.3974, 0.3987, 0.3999, 0.4010, 0.4021, 0.4030, 0.4037, 0.4043, 0.4048, 0.4054, 0.4059, 0.4063, 0.4072],
                    [0.3697, 0.3753, 0.3803, 0.3848, 0.3875, 0.3897, 0.3917, 0.3935, 0.3951, 0.3966, 0.3980, 0.3993, 0.4006, 0.4015, 0.4023, 0.4031, 0.4038, 0.4045, 0.4051, 0.4063],
                    [0.3589, 0.3652, 0.3708, 0.3758, 0.3797, 0.3823, 0.3847, 0.3868, 0.3888, 0.3906, 0.3922, 0.3938, 0.3952, 0.3965, 0.3975, 0.3985, 0.3994, 0.4002, 0.4010, 0.4024],
                    [0.3458, 0.3529, 0.3591, 0.3645, 0.3695, 0.3728, 0.3755, 0.3780, 0.3802, 0.3823, 0.3842, 0.3860, 0.3876, 0.3892, 0.3906, 0.3917, 0.3928, 0.3937, 0.3947, 0.3964],
                    [0.3309, 0.3386, 0.3454, 0.3514, 0.3567, 0.3615, 0.3646, 0.3674, 0.3699, 0.3722, 0.3744, 0.3764, 0.3782, 0.3800, 0.3816, 0.3831, 0.3844, 0.3855, 0.3866, 0.3885],
                    [0.3142, 0.3227, 0.3300, 0.3365, 0.3423, 0.3476, 0.3520, 0.3552, 0.3580, 0.3606, 0.3630, 0.3652, 0.3673, 0.3692, 0.3710, 0.3727, 0.3743, 0.3757, 0.3770, 0.3792],
                    [0.2953, 0.3051, 0.3131, 0.3201, 0.3264, 0.3320, 0.3371, 0.3415, 0.3447, 0.3476, 0.3502, 0.3527, 0.3550, 0.3571, 0.3591, 0.3609, 0.3627, 0.3644, 0.3659, 0.3685]]])

LPTMap.WpMap= np.array([[[35.883, 35.897, 35.897, 35.897, 35.897, 35.897, 35.897, 35.897, 35.897, 35.897, 35.897, 35.897, 35.897, 35.897, 35.897, 35.897, 35.897, 35.897, 35.897, 35.897],
                    [35.712, 35.796, 35.834, 35.843, 35.843, 35.843, 35.843, 35.843, 35.843, 35.843, 35.843, 35.843, 35.843, 35.843, 35.843, 35.843, 35.843, 35.843, 35.843, 35.843],
                    [35.459, 35.571, 35.641, 35.683, 35.706, 35.717, 35.721, 35.721, 35.721, 35.721, 35.721, 35.721, 35.721, 35.721, 35.721, 35.721, 35.721, 35.721, 35.721, 35.721],
                    [35.233, 35.346, 35.423, 35.475, 35.510, 35.534, 35.550, 35.560, 35.567, 35.571, 35.574, 35.575, 35.576, 35.576, 35.576, 35.576, 35.576, 35.576, 35.576, 35.576],
                    [34.957, 35.057, 35.126, 35.175, 35.210, 35.235, 35.253, 35.266, 35.275, 35.282, 35.288, 35.292, 35.295, 35.297, 35.299, 35.301, 35.302, 35.302, 35.303, 35.303],
                    [34.720, 34.800, 34.855, 34.894, 34.921, 34.941, 34.956, 34.967, 34.974, 34.980, 34.984, 34.987, 34.990, 34.991, 34.992, 34.992, 34.992, 34.992, 34.992, 34.992],
                    [34.444, 34.501, 34.539, 34.566, 34.585, 34.598, 34.607, 34.613, 34.618, 34.620, 34.622, 34.623, 34.623, 34.623, 34.623, 34.623, 34.623, 34.623, 34.623, 34.623]],
                    [[41.673, 42.421, 43.056, 43.594, 44.024, 44.395, 44.719, 45.002, 45.250, 45.470, 45.664, 45.837, 45.991, 46.125, 46.244, 46.352, 46.449, 46.536, 46.615, 46.751],
                    [41.636, 42.265, 42.806, 43.273, 43.654, 43.982, 44.271, 44.527, 44.755, 44.959, 45.141, 45.306, 45.455, 45.588, 45.707, 45.816, 45.915, 46.007, 46.091, 46.239],
                    [41.952, 42.463, 42.905, 43.291, 43.619, 43.893, 44.136, 44.352, 44.546, 44.721, 44.879, 45.022, 45.152, 45.272, 45.377, 45.474, 45.564, 45.647, 45.723, 45.860],
                    [42.498, 42.901, 43.252, 43.558, 43.828, 44.052, 44.248, 44.422, 44.580, 44.722, 44.850, 44.968, 45.075, 45.173, 45.264, 45.344, 45.419, 45.488, 45.552, 45.668],
                    [43.028, 43.336, 43.604, 43.839, 44.046, 44.229, 44.380, 44.514, 44.636, 44.746, 44.846, 44.937, 45.020, 45.097, 45.167, 45.232, 45.291, 45.345, 45.395, 45.486],
                    [43.553, 43.780, 43.977, 44.150, 44.302, 44.437, 44.556, 44.655, 44.744, 44.825, 44.898, 44.965, 45.027, 45.083, 45.134, 45.182, 45.227, 45.267, 45.304, 45.371],
                    [43.920, 44.081, 44.219, 44.339, 44.444, 44.538, 44.621, 44.694, 44.755, 44.811, 44.861, 44.907, 44.949, 44.987, 45.022, 45.054, 45.084, 45.112, 45.138, 45.183]]])

#LPTMap.Np_data, LPTMap.alpha_data, LPTMap.PR_data = np.meshgrid(LPTMap.Nc_vals, LPTMap.alpha_vals, LPTMap.PR_vals, sparse=False)
LPTMap.Npts = LPTMap.NpMap.size

LPTMap.units = {}
LPTMap.units['NpMap'] = 'rpm'
LPTMap.units['WpMap'] = 'lbm/s'

# format for new regular grid interpolator:

LPTMap.param_data = []
LPTMap.output_data = []

LPTMap.param_data.append({'name': 'alphaMap', 'values': LPTMap.alphaMap,
                          'default': 1.0, 'units': None})
LPTMap.param_data.append({'name': 'NpMap', 'values': LPTMap.NpMap,
                          'default': 100.0, 'units': 'rpm'})
LPTMap.param_data.append({'name': 'PRmap', 'values': LPTMap.PRmap,
                          'default': 6.0, 'units': None})

LPTMap.output_data.append({'name': 'WpMap', 'values': LPTMap.WpMap,
                           'default': np.mean(LPTMap.WpMap), 'units': 'lbm/s'})
LPTMap.output_data.append({'name': 'effMap', 'values': LPTMap.effMap,
                           'default': np.mean(LPTMap.effMap), 'units': None})
